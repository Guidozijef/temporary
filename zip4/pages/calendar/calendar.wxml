<view class="container">
  <view class="header">
    <text class="title">OOTD 穿搭日历</text>
  </view>

  <!-- Calendar Component -->
  <view class="calendar-card">
    <view class="calendar-header">
      <text class="month-title">2026年 2月</text>
      <view class="nav-arrows">
        <text class="arrow" bindtap="prevMonth">‹</text>
        <text class="arrow" bindtap="nextMonth">›</text>
      </view>
    </view>
    
    <view class="week-days">
      <text>日</text><text>一</text><text>二</text><text>三</text><text>四</text><text>五</text><text>六</text>
    </view>
    
    <view class="days-grid">
      <view 
        wx:for="{{days}}" 
        wx:key="index"
        class="day {{item.prev ? 'prev-month' : ''}} {{item.hasRecord ? 'has-dot' : ''}} {{activeDate === item.date && !item.prev ? 'active' : ''}}"
        bindtap="selectDate"
        data-date="{{item.date}}"
        data-prev="{{item.prev}}"
      >
        <view class="{{activeDate === item.date && !item.prev ? 'active-bg' : ''}}">{{item.date}}</view>
        <view class="dot" wx:if="{{item.hasRecord && activeDate !== item.date}}"></view>
      </view>
    </view>

    <view class="today-record" bindtap="viewRecord">
      <view class="record-left">
        <view class="record-icon">🧥</view>
        <view class="record-info">
          <view class="record-title">{{activeDate}}日 穿搭记录</view>
          <view class="record-desc">包含 3 件单品</view>
        </view>
      </view>
      <text class="arrow-right">›</text>
    </view>
  </view>

  <!-- Scene Capsules -->
  <view class="section-header">
    <text class="section-title">场景胶囊</text>
    <text class="section-btn" bindtap="goToCapsule">新建</text>
  </view>

  <scroll-view class="capsules-scroll" scroll-x="true">
    <view class="capsule-card" bindtap="goToCapsule">
      <view class="capsule-img-wrapper">
        <image class="capsule-img" src="https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=200&h=200&fit=crop" mode="aspectFill"></image>
      </view>
      <view class="capsule-title">五一去大理</view>
      <view class="capsule-desc">12件单品</view>
    </view>
    <view class="capsule-card" bindtap="goToCapsule">
      <view class="capsule-img-wrapper bg-gray">
        <image class="capsule-img" src="https://images.unsplash.com/photo-1497215728101-856f4ea42174?w=200&h=200&fit=crop" mode="aspectFill"></image>
      </view>
      <view class="capsule-title">下周打工装</view>
      <view class="capsule-desc">5套装扮</view>
    </view>
  </scroll-view>

  <!-- Custom Tab Bar -->
  <view class="tab-bar glass">
    <view class="tab-item" bindtap="switchTab" data-path="/pages/wardrobe/wardrobe">
      <image class="tab-icon" src="https://img.icons8.com/ios-glyphs/50/999999/shirt.png"></image>
      <text class="tab-text">衣橱</text>
    </view>
    <view class="tab-item" bindtap="switchTab" data-path="/pages/canvas/canvas">
      <image class="tab-icon" src="https://img.icons8.com/ios-glyphs/50/999999/magic-wand.png"></image>
      <text class="tab-text">画布</text>
    </view>
    <view class="tab-item active">
      <image class="tab-icon" src="https://img.icons8.com/ios-glyphs/50/8A2BE2/calendar.png"></image>
      <text class="tab-text">日历</text>
    </view>
    <view class="tab-item" bindtap="switchTab" data-path="/pages/discover/discover">
      <image class="tab-icon" src="https://img.icons8.com/ios-glyphs/50/999999/compass.png"></image>
      <text class="tab-text">发现</text>
    </view>
  </view>
</view>
